<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DOPENtine Hangman</title>
    <style>
        body {
            text-align: center;
            font-family: 'Courier New', monospace;
            background-color: pink;
        }
        h1 {
            font-size: 3rem;
            color: red;
        }
        .word-container {
            font-size: 2rem;
            letter-spacing: 10px;
            margin: 20px;
        }
        .guess-container {
            margin: 20px;
        }
        .btn {
            font-size: 1.5rem;
            padding: 10px 20px;
            margin: 5px;
            border: none;
            cursor: pointer;
            border-radius: 10px;
            background-color: lightblue;
        }
        .music-btn {
            font-size: 1.2rem;
            padding: 10px 15px;
            border: none;
            cursor: pointer;
            border-radius: 10px;
            background-color: lightcoral;
            margin-top: 10px;
        }
        .message {
            font-size: 1.5rem;
            color: darkred;
            margin-top: 20px;
        }
        .hangman {
            font-size: 2rem;
            white-space: pre;
            font-family: monospace;
            color: darkred;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <h1>DOPENtine Hangman ‚ù§Ô∏è</h1>
    <p class="message">Guess the word to continue!</p>
    <button class="music-btn" onclick="playMusic()">Play Special Song üé∂</button>
    <audio id="background-music" loop>
        <source src="canthelp.mp3" type="audio/mpeg">
    </audio>
    <div class="hangman" id="hangman"></div>
    <div class="word-container" id="word-display">_ _ _ _</div>
    <div class="guess-container" id="guess-container"></div>
    <p class="message" id="result-message"></p>
    <a href="helmi3.html"><button class="btn" id="nextButton" onclick="nextPage()" style="display: none;">Proceed ‚û°Ô∏è</button></a>
    
    <script>
        function playMusic() {
            let audio = document.getElementById("background-music");
            audio.play().catch(error => console.log("Audio play failed: ", error));
        }
        
        const word = "DOPE";
        let guessedLetters = new Set();
        let wrongGuesses = 0;
        const maxWrongGuesses = 6;
        const hangmanStages = [
            "\n\n\n\n",
            "\n\n\n\n____",
            "\n |\n |\n |\n____",
            "  O\n |\n |\n |\n____",
            "  O\n /|\n |\n |\n____",
            "  O\n /|\n |\n/ \\\n____"
        ];
        
        const wordDisplay = document.getElementById("word-display");
        const guessContainer = document.getElementById("guess-container");
        const resultMessage = document.getElementById("result-message");
        const hangmanDisplay = document.getElementById("hangman");
        const nextButton = document.getElementById("nextButton");

        function updateDisplay() {
            displayWord = word.split('').map(letter => guessedLetters.has(letter) ? letter : "_").join(' ');
            wordDisplay.textContent = displayWord;
            hangmanDisplay.textContent = hangmanStages[wrongGuesses];
            
            if (!displayWord.includes("_")) {
                resultMessage.textContent = "I love our inside jokes ‚ù§Ô∏è";
                nextButton.style.display = "block";
                guessContainer.innerHTML = "";
            } else if (wrongGuesses >= maxWrongGuesses) {
                resultMessage.textContent = "Oh no! You lost! Try again!";
                guessContainer.innerHTML = "";
                setTimeout(resetGame, 2000);
            }
        }

        function makeGuess(letter) {
            if (!guessedLetters.has(letter)) {
                guessedLetters.add(letter);
                if (!word.includes(letter)) {
                    wrongGuesses++;
                }
                updateDisplay();
            }
        }

        function createButtons() {
            const letters = "ABCDEFGHIJKLMNOPQRSTUVWXYZ".split('');
            letters.forEach(letter => {
                let button = document.createElement("button");
                button.textContent = letter;
                button.classList.add("btn");
                button.onclick = () => makeGuess(letter);
                guessContainer.appendChild(button);
            });
        }

        function resetGame() {
            guessedLetters.clear();
            wrongGuesses = 0;
            updateDisplay();
            guessContainer.innerHTML = "";
            createButtons();
            resultMessage.textContent = "Guess the word to continue!";
        }

        function nextPage() {
            window.location.href = "final.html";
        }

        createButtons();
        updateDisplay();
    </script>
</body>
</html>
